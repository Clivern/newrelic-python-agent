[tox]
setupdir = {toxinidir}/../..
envlist =
    {py26,py27}-Django{0103,0104}-{with,without}-extensions,
    {py26,py27,py33,py34}-Django{0105,0106}-{with,without}-extensions,
    {py27,py33,py34}-Django{0107}-{with,without}-extensions,
    {py27,py33,py34,py35,py36}-Django{0108}-{with,without}-extensions,
    {py27,py34,py35,py36}-Django0109-{with,without}-extensions,
    {py27,py34,py35,py36}-Django{0110,0111}-{old,new}-middleware-{with,without}-extensions,
    {py35,py36}-Djangomaster-new-middleware-{with,without}-extensions,
    pypy-Django{0103,0104,0105,0106,0107,0108,0109}-without-extensions,
    pypy-Django{0110,0111}-{old,new}-middleware-without-extensions,

[jenkins]
mostrecent = Django0111

[pytest]
usefixtures = session_initialization requires_data_collector

[testenv]
deps =
    Django0103: Django<1.4
    Django0104: Django<1.5
    Django0105: Django<1.6
    Django0106: Django<1.7
    Django0107: Django<1.8
    Django0108: Django<1.9
    Django0109: Django<1.10
    Django0110: Django<1.11
    Django0111: Django<1.12
    Djangomaster: git+https://github.com/django/django.git
setenv =
    PYTHONPATH={toxinidir}/..
    TOX_ENVDIR = {envdir}
    without-extensions: NEW_RELIC_EXTENSIONS = false
    with-extensions: NEW_RELIC_EXTENSIONS = true
    old-middleware: DJANGO_SETTINGS_MODULE=settings_0110_old
    new-middleware: DJANGO_SETTINGS_MODULE=settings_0110_new

commands = py.test -v []

install_command=
    pip install -r {toxinidir}/../base_requirements.txt {opts} {packages}

