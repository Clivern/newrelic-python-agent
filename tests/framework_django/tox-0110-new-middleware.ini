[tox]
setupdir = {toxinidir}/../..
toxworkdir = {toxinidir}/.tox-0110
envlist =
    py27-without-extensions,
    py34-without-extensions,
    py35-without-extensions,
    pypy-without-extensions,
    py27-with-extensions,
    py34-with-extensions,
    py35-with-extensions,

[pytest]
usefixtures = session_initialization requires_data_collector

[defaults]
deps =
    pytest==2.7.3
    pytest-cov
    WebTest
    Django<1.10.999
setenv =
    PYTHONPATH={toxinidir}/..
    TOX_ENVDIR = {envdir}
    DJANGO_SETTINGS_MODULE=settings_0110_new

[defaults-without-extensions]
setenv =
    {[defaults]setenv}
    NEW_RELIC_EXTENSIONS = false

[defaults-with-extensions]
setenv =
    {[defaults]setenv}
    NEW_RELIC_EXTENSIONS = true

[testenv:py27-without-extensions]
basepython = python2.7
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-without-extensions]setenv}

[testenv:py34-without-extensions]
basepython = python3.4
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-without-extensions]setenv}

[testenv:py35-without-extensions]
basepython = python3.5
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-without-extensions]setenv}

[testenv:pypy-without-extensions]
basepython = pypy
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-without-extensions]setenv}

[testenv:py27-with-extensions]
basepython = python2.7
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-with-extensions]setenv}

[testenv:py34-with-extensions]
basepython = python3.4
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-with-extensions]setenv}

[testenv:py35-with-extensions]
basepython = python3.5
deps = {[defaults]deps}
commands = py.test -v []
setenv = {[defaults-with-extensions]setenv}
